<html>
<head>
	<script src="//code.jquery.com/jquery-1.10.1.min.js"></script>
	<script type="text/javascript">
		/**
		 * Convert a timestamp to the format "m/d/yy h:MM:ss TT"
		 * @type {Date}
		 * Based on gist at https://gist.github.com/hurjas/2660489
		 */
		function formatTime(timestamp) {
			var dateObj = new Date(timestamp);
			var date = [ dateObj.getMonth() + 1, dateObj.getDate(), dateObj.getFullYear() ];
			var time = [ dateObj.getHours(), dateObj.getMinutes(), dateObj.getSeconds() ];
			var suffix = ( time[0] < 12 ) ? "AM" : "PM";
			time[0] = ( time[0] < 12 ) ? time[0] : time[0] - 12;
			time[0] = time[0] || 12;
			// If seconds and minutes are less than 10, add a zero
			for ( var i = 1; i < 3; i++ ) {
				if ( time[i] < 10 ) {
			    	time[i] = "0" + time[i];
			    }
			}
			return date.join("/") + " " + time.join(":") + " " + suffix;
		}

		// Using the image URLs from backend, render an animation of 5 frames per second.
		var images = <%-JSON.stringify(images)%>;
		// Want to do initial parse of images array, to format timestamps once (rather than every time we show them)
		for (var i = 0; i < images.length; i++) {
			var timestamp = images[i].timestamp;
			images[i].formattedTime = formatTime(parseInt(timestamp));
		}
		$(document).ready(function() {
			var i = 0;
			window.setInterval(function() {
				if (i >= images.length) { i = 0; }
				$("#sprite img").attr("src", images[i].imgurLink);
				$("#timestamp").html(images[i].formattedTime);
				i++;
			}, 200); // 200 ms interval = 5 frames per second
		});
	</script>
</head>
<body>
	<div id="sprite"><img src="" width="300" /></div>
	<div id="timestamp"></div>
</body>
</html>